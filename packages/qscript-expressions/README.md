# qscript-expressions

[![Known Vulnerabilities](https://snyk.io/test/github/wmfs/qscript/badge.svg?targetFile=packages%2Fqscript-cleaner%2Fpackage.json)](https://snyk.io/test/github/wmfs/qscript?targetFile=packages%2Fqscript-doc-generator%2Fpackage.json)

> qscript-expressions provides a number of utilities to generate expressions, generate AST's, and clean qscript data for submissions

## <a name="install"></a>Install
```bash
$ npm install qscript-expressions --save
```

## <a name="usage"></a>Usage
```bash
const expressions = new QScriptExpressionsxpressions()
```

##### Method summary

| Usage      | Description |
| -----------      | ----------- |
| `const expressionList = getExpressionsFromQScript(qscript)` | Takes a qscript schema and extracts a list of expressions. |
| `convertExpressionsToAst(expressions)`| Takes a list of expressions generated by `getExpressionsFromQScript()` and amends the generated AST's to an object `asts` available from `expressions.asts` |
| `addQScript(qscript)` | A combination of `getExpressionsFromQScript(qscript)` and `convertExpressionsToAst(expressions)`, used to generate AST's from qscript in one function call |
| `const visibilityList = calculateWidgetVisibility(qscript, data, asts)` | Takes a qscript schema, submission data, and a list of AST's to generate an object of `{key: boolean}` values representing whether a widget should be visible or not |
| `const clean = cleanData(data, visibilityList)`| Takes submission data and a visibility list generated by `calculateWidgetVisibility` and returns a cleaned data object with values of hidden fields removed |


## <a name="license"></a>License
[MIT](https://github.com/wmfs/qscript/blob/master/LICENSE)
